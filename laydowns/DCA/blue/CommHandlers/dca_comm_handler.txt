# File generated by Wizard 2.2205.6 on Nov 25, 2025.

include_once comm_network_names.txt

# Invoked by the CommManager during Initialization to register the Comm Networks
script Array<CommNetwork> DefineCommNetworks() {
   return {
      ConstructCommNetworkWithDelay( gcLINK16_NETWORK_NAME,
                                     G425_COMM_NETWORK_DELAY_TYPE().RANDOM_GAUSSIAN, 
                                     1.0, 1.0 ),
      ConstructCommNetworkWithDelay( gcMADL_NETWORK_NAME,
                                     G425_COMM_NETWORK_DELAY_TYPE().RANDOM_GAUSSIAN, 
                                     1.0, 1.0 )
   };
}
end_script

script void AddTrackToTrackManager(WsfPlatform aPlatform, WsfTrackMessage aTrackMsg){
   WsfTrackManager trackManager = aPlatform.TrackManager(); # Get the platform's TrackManager
   trackManager.AddTrackReport(aTrackMsg.Track());
}
end_script

# blue platform handling an incoming message
script void blueHandleCommMessage(CommMessage aCommMessage) {
   # Get the platform that is processing this message
   WsfPlatform handlingPlatform = aCommMessage.GetTargetPlatform();
   
   # If the handlingPlatform is null, then it has been destroyed so don't handle the message
   if( handlingPlatform.IsNull() )
      return;
   
   # Get the message to be processed
   WsfMessage message = aCommMessage.GetMessage();
   
   # Message handling by type
   if(message.Type() == "WSF_TRACK_MESSAGE") {
      # Add track reports to the track manager
      WsfTrackMessage trackMessage = (WsfTrackMessage)message;
      AddTrackToTrackManager(handlingPlatform, trackMessage);
   } 
   # Forward message to the BMS
   G425BlueBmsInstance().HandleCommMessage(aCommMessage);
}
end_script

