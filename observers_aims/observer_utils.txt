# This script reads the mission.log to determine the version number
script string GetAFSIMVersion()
   FileIO logFile = FileIO();
   logFile.Open("mission.log");
   string line = logFile.Readln();
   logFile.Close();
   return line.Split(" ").Back();
end_script 

script double Get_X(WsfGeoPoint origin, WsfGeoPoint point)
   WsfGeoPoint X = WsfGeoPoint();
   X.Set(origin.Latitude(),point.Longitude(),0);
   double Dist_X = origin.GroundRangeTo(X)*MATH.FT_PER_M();
   
   if (origin.Longitude() < point.Longitude())
   {
      return Dist_X;
   }
   else
   {
      return Dist_X * -1;
   }   
end_script

script double Get_Y(WsfGeoPoint origin, WsfGeoPoint point)
   WsfGeoPoint Y = WsfGeoPoint();
   Y.Set(point.Latitude(),origin.Longitude(),0);
   double Dist_Y = origin.GroundRangeTo(Y)*MATH.FT_PER_M();
   
   if (origin.Latitude() < point.Latitude())
   {
      return Dist_Y;
   }
   else
   {
      return Dist_Y * -1;
   }   
end_script

#MTC - fxn to grab dead platforms based on missile-shooter-target trios
script WsfPlatform getDeadPlat(WsfWeaponEngagement aWeaponEngagement, string shtortgt)
   int step;
   for(int num = 0; num < msl_sht_tgt.Size();num = num + 3)
   {
      if(msl_sht_tgt.Get(num) == aWeaponEngagement.WeaponPlatform().Index())
      {
         if(shtortgt == "shooter")
         {
            step = 1;
         }
         else if(shtortgt == "target")
         {
            step = 2;
         }
         foreach(WsfPlatform plat in dead_aircraft)
         {
            if(msl_sht_tgt.Get(num+step) == plat.AuxDataInt("platID"))
            {
               return plat;
            }
            else
               return null;
         }
      }
   }   
   
   return null;
end_script
